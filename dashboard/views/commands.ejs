<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('partials/head', { 
        title: title,
        description: 'Explore all available RentoBot commands including moderation, economy, leveling, fun, and utility commands for your Discord server.',
        url: '/commands',
        botClient: typeof botClient !== 'undefined' ? botClient : null
    }) %>
</head>
<body>
    <%- include('partials/nav', { 
        title: title,
        isAuthenticated: typeof user !== 'undefined' && user,
        botClient: typeof botClient !== 'undefined' ? botClient : null
    }) %>
   
    <div class="dashboard-section">
        <div class="container">
            <div class="section-header" style="text-align: center;">
                <h2>Complete Command Reference</h2>
            </div>

            <div class="commands-search">
                <input type="text" id="commandSearch" class="search-box" placeholder="Search commands...">
                <div style="margin-top: 16px; display: flex; gap: 12px; justify-content: center;">
                    <a href="/commands?sort=name" class="sort-btn <%= currentSort === 'name' ? 'active' : '' %>">Sort by Name</a>
                    <a href="/commands?sort=usage" class="sort-btn <%= currentSort === 'usage' ? 'active' : '' %>">Sort by Usage</a>
                </div>
            </div>

            <div class="commands-grid" id="commandsContainer">
                <% commands.forEach(cmd => { %>
                    <div class="command-card" data-name="<%= cmd.name %>" data-category="<%= cmd.category %>">
                        <div class="command-info">
                            <h4><%= cmd.name %></h4>
                            <p><%= cmd.description %></p>
                        </div>
                        <div class="command-usage"><%= cmd.usage %> usage</div>
                    </div>
                <% }); %>
            </div>
        </div>
    </div>

    <script>
        const searchInput = document.getElementById('commandSearch');
        const commandCards = document.querySelectorAll('.command-card');

        searchInput.addEventListener('input', (e) => {
            const searchTerm = e.target.value.toLowerCase();
            
            commandCards.forEach(card => {
                const name = card.dataset.name.toLowerCase();
                const category = card.dataset.category.toLowerCase();
                
                if (name.includes(searchTerm) || category.includes(searchTerm)) {
                    card.style.display = 'flex';
                } else {
                    card.style.display = 'none';
                }
            });
        });
    </script>
    <%- include('partials/footer') %>
</body>
</html>